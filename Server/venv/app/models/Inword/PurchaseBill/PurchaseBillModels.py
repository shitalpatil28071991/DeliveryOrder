from sqlalchemy import Column, Integer, String, Date, Numeric, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship
from app import db 

Base = declarative_base()

class SugarPurchase(db.Model):
    __tablename__ = 'nt_1_sugarpurchase'
    
    purchaseid = db.Column(db.Integer, nullable=False,primary_key=True)
    doc_no = db.Column(db.Integer, nullable=True)
    Tran_Type = db.Column(db.String(2), nullable=True)
    PURCNO = db.Column(db.Integer, nullable=True)
    doc_date = db.Column(db.Date, nullable=True)
    Ac_Code = db.Column(db.Integer, nullable=True)
    Unit_Code = db.Column(db.Integer, nullable=True)
    mill_code = db.Column(db.Integer, nullable=True)
    FROM_STATION = db.Column(db.String(255), nullable=True)
    TO_STATION = db.Column(db.String(255), nullable=True)
    LORRYNO = db.Column(db.String(50), nullable=True)
    BROKER = db.Column(db.Integer, nullable=True)
    wearhouse = db.Column(db.String, nullable=True)
    subTotal = db.Column(db.Numeric(18, 2), nullable=True)
    LESS_FRT_RATE = db.Column(db.Numeric(18, 2), nullable=True)
    freight = db.Column(db.Numeric(18, 2), nullable=True)
    cash_advance = db.Column(db.Numeric(18, 2), nullable=True)
    bank_commission = db.Column(db.Numeric(18, 2), nullable=True)
    OTHER_AMT = db.Column(db.Numeric(18, 2), nullable=True)
    Bill_Amount = db.Column(db.Numeric(18, 2), nullable=True)
    Due_Days = db.Column(db.Integer, nullable=True)
    NETQNTL = db.Column(db.Numeric(18, 2), nullable=True)
    Company_Code = db.Column(db.Integer, nullable=True)
    Year_Code = db.Column(db.Integer, nullable=True)
    Branch_Code = db.Column(db.Integer, nullable=True)
    Created_By = db.Column(db.String(255), nullable=True)
    Modified_By = db.Column(db.String(255), nullable=True)
    Bill_No = db.Column(db.String(50), nullable=True)
    GstRateCode = db.Column(db.Integer, nullable=True)
    CGSTRate = db.Column(db.Numeric(18, 2), nullable=True)
    CGSTAmount = db.Column(db.Numeric(18, 2), nullable=True)
    SGSTRate = db.Column(db.Numeric(18, 2), nullable=True)
    SGSTAmount = db.Column(db.Numeric(18, 2), nullable=True)
    IGSTRate = db.Column(db.Numeric(18, 2), nullable=True)
    IGSTAmount = db.Column(db.Numeric(18, 2), nullable=True)
    EWay_Bill_No = db.Column(db.String(50), nullable=True)
    ac = db.Column(db.Integer, nullable=True)
    uc = db.Column(db.Integer, nullable=True)
    mc = db.Column(db.Integer, nullable=True)
    bk = db.Column(db.Integer, nullable=True)
    grade = db.Column(db.String(50), nullable=True)
    mill_inv_date = db.Column(db.Date, nullable=True)
    Purcid = db.Column(db.Integer, nullable=True)
    SelfBal = db.Column(db.String(50), nullable=True)
    TCS_Rate = db.Column(db.Numeric(18, 3), nullable=True)
    TCS_Amt = db.Column(db.Numeric(18, 2), nullable=True)
    TCS_Net_Payable = db.Column(db.Numeric(18, 2), nullable=False)
    purchaseidnew = db.Column(db.Integer, nullable=False)
    TDS_Amt = db.Column(db.Numeric(18, 2), nullable=True)
    TDS_Rate = db.Column(db.Numeric(18, 3), nullable=True)
    Retail_Stock = db.Column(db.String(1), nullable=True)
    gstid=db.Column(db.Integer, nullable=False)

    
    details = db.relationship('SugarPurchaseDetail', backref='purchase', lazy=True)

class SugarPurchaseDetail(db.Model):
    __tablename__ = 'nt_1_sugarpurchasedetails'
    
    purchasedetailid = db.Column(db.Integer, primary_key=True, nullable=False)
    purchaseid = db.Column(db.Integer, ForeignKey('nt_1_sugarpurchase.purchaseid'), nullable=False)
    doc_no = db.Column(db.Integer, nullable=True)
    detail_id = db.Column(db.Integer, nullable=True)
    Tran_Type = db.Column(db.String(2), nullable=True)
    item_code = db.Column(db.Integer, nullable=True)
    narration = db.Column(db.String, nullable=True)
    Quantal = db.Column(db.Numeric(18, 2), nullable=True)
    packing = db.Column(db.Integer, nullable=True)
    bags = db.Column(db.Integer, nullable=True)
    rate = db.Column(db.Numeric(18, 2), nullable=True)
    item_Amount = db.Column(db.Numeric(18, 2), nullable=True)
    Company_Code = db.Column(db.Integer, nullable=True)
    Year_Code = db.Column(db.Integer, nullable=True)
    Branch_Code = db.Column(db.Integer, nullable=False)
    Created_By = db.Column(db.String(255), nullable=True)
    Modified_By = db.Column(db.String(255), nullable=True)
    ic = db.Column(db.Integer, nullable=True)
    Brand_Code = db.Column(db.Integer, nullable=True)
